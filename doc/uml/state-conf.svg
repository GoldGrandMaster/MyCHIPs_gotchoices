<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="740px" preserveAspectRatio="none" style="width:852px;height:740px;background:#FFFFFF;" version="1.1" viewBox="0 0 852 740" width="852px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194" x="317.455" y="23.5352">Foil Chit Consensus States</text><!--cluster foil--><g id="cluster_foil"><path d="M90.32,44.4883 L633.32,44.4883 A12.5,12.5 0 0 1 645.82,56.9883 L645.82,60.4883 L77.82,60.4883 L77.82,56.9883 A12.5,12.5 0 0 1 90.32,44.4883 " fill="#E8E8EA" style="stroke:#E8E8EA;stroke-width:1.0;"/><rect fill="none" height="671" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="568" x="77.82" y="44.4883"/><line style="stroke:#202024;stroke-width:0.5;" x1="77.82" x2="645.82" y1="60.4883" y2="60.4883"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="76" x="323.82" y="56.9585">Foil Consensus</text></g><g id="foil.unlinked"><rect fill="#E8E8EA" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="100" x="101.82" y="264.9883"/><line style="stroke:#202024;stroke-width:0.5;" x1="101.82" x2="201.82" y1="285.9883" y2="285.9883"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="42" x="130.82" y="278.4585">Unlinked</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="106.82" y="299.4585">Chain Seq is null</text></g><g id="foil.linking"><rect fill="#E8E8EA" height="75" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="136" x="101.82" y="446.4883"/><line style="stroke:#202024;stroke-width:0.5;" x1="101.82" x2="237.82" y1="467.4883" y2="467.4883"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="34" x="152.82" y="459.9585">Linking</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="73" x="106.82" y="480.9585">Chit local issue</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="87" x="106.82" y="491.9585">Chain Seq not null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="106.82" y="502.9585">Chain Seq &gt; Chain Conf</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="79" x="106.82" y="513.9585">Chit not yet sent</text></g><g id="foil.linked"><rect fill="#E8E8EA" height="53" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="142" x="183.82" y="638.4883"/><line style="stroke:#202024;stroke-width:0.5;" x1="183.82" x2="325.82" y1="659.4883" y2="659.4883"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="32" x="238.82" y="651.9585">Linked</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="87" x="188.82" y="672.9585">Chain Seq not null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="122" x="188.82" y="683.9585">Chain Seq &lt;= Chain Conf</text></g><g id="foil.notify"><rect fill="#E8E8EA" height="75" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="136" x="272.82" y="446.4883"/><line style="stroke:#202024;stroke-width:0.5;" x1="272.82" x2="408.82" y1="467.4883" y2="467.4883"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="28" x="326.82" y="459.9585">Notify</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="85" x="277.82" y="480.9585">Chit remote issue</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="87" x="277.82" y="491.9585">Chain Seq not null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="277.82" y="502.9585">Chain Seq &gt; Chain Conf</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="111" x="277.82" y="513.9585">Queued message: upd</text></g><g id="error"><rect fill="#E8E8EA" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="98" x="672.82" y="264.9883"/><line style="stroke:#202024;stroke-width:0.5;" x1="672.82" x2="770.82" y1="285.9883" y2="285.9883"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="709.82" y="278.4585">error</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="78" x="677.82" y="299.4585">Can't Consense</text></g><!--link foil to unlinked--><g id="link_foil_unlinked"><path d="M338.68,106.5083 C332.9,107.3283 147.87,133.7983 117.82,174.4883 C99.26,199.6083 114.31,234.7983 129.84,259.5183 " fill="none" id="foil-to-unlinked" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="132.53,263.6683,131.0045,253.9383,129.8161,259.4689,124.2855,258.2805,132.53,263.6683" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="131.32" y="189.4585">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="81" x="118.82" y="200.4585">Site creates new</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="55" x="131.82" y="211.4585">valid lift chit</text></g><!--link foil to unlinked--><g id="link_foil_unlinked"><path d="M338.77,106.5083 C336.96,107.4783 278.7,138.5983 240.82,174.4883 C239.84,175.4183 200.42,226.2383 174.37,259.8583 " fill="none" id="foil-to-unlinked-1" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="171.56,263.4883,180.2277,258.8116,174.6168,259.5315,173.8969,253.9207,171.56,263.4883" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="27" x="271.82" y="189.4585">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="87" x="241.82" y="200.4585">User creates new</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="72" x="249.32" y="211.4585">valid direct chit</text></g><!--link foil to notify--><g id="link_foil_notify"><path d="M338.83,106.5383 C339.36,108.6283 356.23,175.8783 333.82,220.4883 C324.81,238.4083 307.43,230.8683 298.82,248.9883 C283.46,281.2983 294.05,294.0283 298.82,329.4883 C303.94,367.6083 315.91,409.6683 325.77,440.0983 " fill="none" id="foil-to-notify" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="327.24,444.5883,328.233,434.7896,325.6803,439.8378,320.6322,437.2851,327.24,444.5883" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="358.82" y="259.9585">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="144" x="299.82" y="270.9585">Received new chit from stock</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="133" x="305.32" y="281.9585">[Agree with proposed hash]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="83" x="330.32" y="292.9585">/Add chit to chain</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="319.82" y="303.9585">endHash = propHash</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="121" x="311.32" y="314.9585">Queue message Act:upd</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="114" x="314.82" y="325.9585">No missing chits = ACK</text></g><!--link foil to notify--><g id="link_foil_notify"><path d="M338.88,106.5383 C341.43,108.5783 423.39,174.4483 448.82,248.9883 C460.36,282.8483 459.61,295.3783 448.82,329.4883 C435.43,371.7783 405.74,412.4883 380.88,441.3583 " fill="none" id="foil-to-notify-1" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="377.61,445.0983,386.5379,440.9399,380.8944,441.3283,380.506,435.6848,377.61,445.0983" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="518.82" y="259.9585">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="144" x="459.82" y="270.9585">Received new chit from stock</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="148" x="457.82" y="281.9585">[Disagree with proposed hash]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="83" x="490.32" y="292.9585">/Add chit to chain</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="102" x="480.82" y="303.9585">endHash = newHash</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="121" x="471.32" y="314.9585">Queue message Act:upd</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="133" x="465.32" y="325.9585">Send missing chits = NACK</text></g><!--link unlinked to linking--><g id="link_unlinked_linking"><path d="M101.37,303.1383 C72.06,313.0583 37.51,330.3683 19.82,359.4883 C6.66,381.1383 6,395.2483 19.82,416.4883 C36.85,442.6783 66.83,458.6383 95.53,468.3183 " fill="none" id="unlinked-to-linking" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="100.19,469.8283,92.8451,463.2668,95.4297,468.2987,90.3978,470.8833,100.19,469.8283" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="55.82" y="368.9585">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="126" x="20.82" y="379.9585">Detected new valid chit(s)</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="63" x="52.32" y="390.9585">/Add to chain</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="37.32" y="401.9585">Generate endHash</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="39" x="65.82" y="412.9585">Act:new</text></g><!--link linking to linked--><g id="link_linking_linked"><path d="M143.94,521.8683 C129.28,547.6983 116.93,582.1683 133.82,608.4883 C144.13,624.5683 160.4,636.0483 177.7,644.2283 " fill="none" id="linking-to-linked" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="182.22,646.2583,175.6351,638.9344,177.6551,644.2183,172.3712,646.2383,182.22,646.2583" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="185.82" y="560.9585">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="126" x="150.82" y="571.9585">Detect chit needs sending</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="158" x="134.82" y="582.9585">/Send queued message to Stock</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="110" x="158.82" y="593.9585">Send new chit Act:new</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="143" x="142.32" y="604.9585">Ratchet ackHash = newHash</text></g><!--link notify to linked--><g id="link_notify_linked"><path d="M331.35,521.9683 C324.08,547.2183 312.76,580.9483 297.82,608.4883 C293.19,617.0083 287.3,625.5883 281.36,633.3683 " fill="none" id="notify-to-linked" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="278.6,636.9083,287.2864,632.2664,281.6727,632.9638,280.9752,627.3501,278.6,636.9083" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="373.82" y="566.4585">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="119" x="342.32" y="577.4585">Detect queued message</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="158" x="322.82" y="588.4585">/Send queued message to Stock</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="143" x="330.32" y="599.4585">Ratchet ackHash = newHash</text></g><!--link foil to foil--><g id="link_foil_foil"><path d="M655.48,104.9583 C667.36,82.4883 690.57,82.6683 690.57,105.4883 C690.57,128.3083 667.36,128.4883 655.48,106.0183 " fill="none" id="foil-to-foil" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="655.48,106.0183,656.1504,115.8443,657.817,110.4385,663.2228,112.1051,655.48,106.0183" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="755.07" y="80.9585">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="710.07" y="91.9585">Receive update request</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="91" x="722.57" y="102.9585">from Stock Act:req</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="143" x="696.57" y="113.9585">/Send all chits since ackHash</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="721.57" y="124.9585">(or specified index)</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="111" x="712.57" y="135.9585">and also new endHash</text></g><!--link foil to error--><g id="link_foil_error"><path d="M645.9423,244.8396 C646.4705,245.116 646.9981,245.3924 647.5251,245.6689 C649.6332,246.7749 651.7317,247.8814 653.82,248.9883 C661.05,252.8183 668.61,257.0483 675.95,261.2683 " fill="none" id="foil-to-error" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="680.21,263.7283,674.4367,255.749,675.8865,261.2169,670.4185,262.6667,680.21,263.7283" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="651.82" y="183.9585">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="99" x="615.32" y="194.9585">Receive error report</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="89" x="620.32" y="205.9585">from Stock Act:err</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="138" x="595.82" y="216.9585">/Notify my local user of error</text></g><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="142" x="343.455" y="730.1563">Fri Feb 10 23:39:00 MST 2023</text><!--SRC=[hLNRQjmm47ttLqn3mBkmwGSiJM3Pq1PQ0isIfxeFgZNU5P57ZYGd3QN_tj75UtL2A7tPbNmqvvovo7wdgDQzHAXDsnfwt_MjBiwzyXed7utIiDme3qj33idr3bPUU7JJed1X0Kquyhi0IDkpEzAAxb6UWN3GvyqE_ifxHUk8whG-17FaSToDyQfvZX35PV4d6pXB9WT_yKWmLHHbj0eIlL3QpGkqrjWvB0MLsuIm63moi16AO8KFe5YbrxeuHLZy9UZ3PTumTLFavEQfVDhKGZEjwt4V6MKzmgvUPWrXp-Y14_55Aaj6BBQ6Kq-2E-H4xnGwa1lWRptsAA55vyGQvz1tSbjURmKvvPKXiBr6hdCSYOllv_BdZuihsDNtF1wTyFCPh1I7rXR3B07XKqMFGYl9VMyyr9p2h2odMwRUeHtd2iWCxlXtZ4qgY_K8NuU9RyXlO0lFPxTOethaT9aeXa9ZJSk3QEhxMRbOMqHuKdu3dJMTSNnm8zocd46va385UCF_NCMAaEHdHk4odWxBYc8rXsB2elPphcT5DmPQRXYtDv8uZbail_mVrzUAjVxHE1E-wdl5Hq-StoJhszkrcuVj2E-DmpLwxbCsdreNY2PkoctB_dRMFY6X3QENFLOKpN0iAsRwGxsZwKjoAMD2b2xS8CbHIIqcz70mya5z5KgPqzqMEGjNT2jylU6xAEhxmxgnfzImjrWwL7sBdTTqJoOdxCVd9bpfK5ABhEHyHN5weaRCaP_lkH5QvqvpqsiSn2kQ60kkmrerYjqgalXhMf688Sx4ikMcZSnrVZ-FseiOk-kCFJN7O3ANlXBGFkSNRdWxW6bID2l-1G00]--></g></svg>